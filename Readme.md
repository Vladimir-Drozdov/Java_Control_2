# Контрольная работа 2

## 1. Общая идея решения

### Основной функционал
- Работа с **доменной моделью**:
    - **Счета (BankAccount)**: создание, редактирование, удаление, просмотр.
    - **Категории (Category)**: создание, редактирование, удаление, просмотр.
    - **Операции (Operation)**: создание, редактирование, удаление, просмотр.
- **Импорт/экспорт данных** в CSV:
    - Счета, категории, операции.
- **Измерение времени выполнения пользовательских сценариев** через декоратор `TimingDecorator`.

### Изменения/расширения
- Использован **декоратор** для измерения времени команд.
- Применен **Прокси** для репозитория счетов (`BankAccountRepositoryProxy`), обеспечивающий кэширование и работу с CSV.
- Импорт и экспорт реализован через **Шаблонный метод** и **Посетитель**, чтобы легко добавлять новые форматы файлов.

## 2. Принципы SOLID и GRASP

### SOLID
- **S (Single Responsibility)**: каждый класс выполняет одну задачу.
    - Пример: `BankAccountFacade` управляет только счетами, команды (`EditAccountCommand`, `DeleteCategoryCommand`) инкапсулируют конкретные действия.
- **O (Open/Closed)**: добавление новых команд не требует изменения старого кода.
- **L (Liskov Substitution)**: все команды реализуют интерфейс `Command` и могут заменять друг друга.
- **I (Interface Segregation)**: фасады предоставляют только необходимые методы.
- **D (Dependency Inversion)**: через DI-контейнер (`AppConfig`) внедряются интерфейсы репозиториев, а не конкретные реализации.

### GRASP
- **High Cohesion**: логика работы с сущностью сосредоточена в фасаде и соответствующих командах.
- **Low Coupling**: команды используют фасады и интерфейсы, не зависят напрямую от репозиториев.

## 3. Паттерны GoF

| Паттерн | Группа | Использование | Зачем |
|----------|--------|---------------|-------|
| Facade | Структурный | `BankAccountFacade`, `CategoryFacade`, `OperationFacade` | Объединяет методы CRUD в один объект, упрощает работу с репозиториями |
| Command | Поведенческий | Все команды: `CreateAccountCommand`, `DeleteOperationCommand` и т.д. | Инкапсулирует действия пользователя, удобно для истории и декораторов |
| Decorator | Структурный | `TimingDecorator` | Измерение времени выполнения команд без изменения их кода |
| Template Method | Поведенческий | `CsvAccountImporter`, `CsvCategoryImporter`, `CsvOperationImporter` | Общий алгоритм импорта с различием только в парсинге файла |
| Visitor | Поведенческий | `CsvExporter` | Позволяет добавлять новые операции (экспорт) без изменения классов доменной модели |
| Proxy | Структурный | `BankAccountRepositoryProxy` | Управляет доступом к репозиторию, кэширует данные и синхронизирует с CSV |
| Factory | Порождающий | `DomainFactory` | Централизованное создание объектов с валидацией, чтобы избежать дублирования кода |

## 4. Инструкция по запуску

1. Открыть проект в IntelliJ IDEA как maven-проект.
2. Запустить файл Main при помощи зеленой стрелочки
3. Протестировать при помощи нажатия команды test в Lifestyle или написания команды mvn test